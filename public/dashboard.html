<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al Kawthar - Gestion des Notes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <!-- ===== PAGE 1: SÉLECTION DE SECTION ===== -->
    <div id="section-page" class="page active">
        <div class="bg-animation">
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span><span></span>
        </div>
        
        <div class="selector-container">
            <img src="https://cdn.glitch.global/f566aaa0-dea8-4ebc-bb3a-23070b8c7e7a/al-kawthar-international-schools-jeddah-saudi-arabia-modified.png?v=1739958835552" alt="Logo Al Kawthar" class="logo">
            
            <h1>Bienvenue à Al Kawthar International School</h1>
            <p class="subtitle">Veuillez sélectionner votre section</p>

            <div class="section-cards">
                <div class="section-card boys" onclick="selectSection('boys')">
                    <div class="icon-wrapper">
                        <i class="fas fa-user-graduate section-icon"></i>
                    </div>
                    <h2 class="section-title">Section Garçons</h2>
                    <p class="section-description">Gestion des notes et suivi académique</p>
                    <div class="stats">
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>5 Classes</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>8 Enseignants</span>
                        </div>
                    </div>
                    <button class="section-btn">
                        <span>Accéder</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>

                <div class="section-card girls" onclick="selectSection('girls')">
                    <div class="icon-wrapper">
                        <i class="fas fa-user-graduate section-icon"></i>
                    </div>
                    <h2 class="section-title">Section Filles</h2>
                    <p class="section-description">Gestion des notes et suivi académique</p>
                    <div class="stats">
                        <div class="stat-item">
                            <i class="fas fa-users"></i>
                            <span>7 Classes</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-chalkboard-teacher"></i>
                            <span>12 Enseignantes</span>
                        </div>
                    </div>
                    <button class="section-btn">
                        <span>Accéder</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== PAGE 2: LOGIN ===== -->
    <div id="login-page" class="page">
        <div class="login-container">
            <a href="#" onclick="showPage('section-page')" class="back-link">
                <i class="fas fa-arrow-left"></i> Retour à la sélection
            </a>
            
            <img src="https://cdn.glitch.global/f566aaa0-dea8-4ebc-bb3a-23070b8c7e7a/al-kawthar-international-schools-jeddah-saudi-arabia-modified.png?v=1739958835552" alt="Logo École">
            
            <div class="section-badge" id="sectionBadge">
                <i class="fas fa-user-graduate" id="sectionIcon"></i>
                <span id="sectionName">Section</span>
            </div>
            
            <h2>Connexion Enseignant</h2>
            <form id="loginForm">
                <div class="input-group">
                    <label for="username"><i class="fas fa-user"></i> Nom d'utilisateur</label>
                    <input type="text" id="username" name="username" required autocomplete="username" placeholder="Entrez votre nom">
                </div>
                <div class="input-group">
                    <label for="password"><i class="fas fa-lock"></i> Mot de passe</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password" placeholder="Entrez votre mot de passe">
                    <i class="fas fa-eye password-toggle-icon" id="togglePassword"></i>
                </div>

                <div class="options">
                    <label for="rememberMe" class="checkbox-label">
                        <input type="checkbox" id="rememberMe" name="rememberMe" value="true">
                        <span>Rester connecté (14 jours)</span>
                    </label>
                </div>

                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Se Connecter</span>
                </button>
                <p id="errorMessage" class="error-message"></p>
            </form>
        </div>
    </div>

    <!-- ===== PAGE 3: DASHBOARD ===== -->
    <div id="dashboard-page" class="page">
        <div id="progress-container">
            <label for="progressBar">Génération en cours...</label>
            <progress id="progressBar" value="0" max="100"></progress>
        </div>

        <header>
            <div class="header-title">
                <img src="https://cdn.glitch.global/f566aaa0-dea8-4ebc-bb3a-23070b8c7e7a/al-kawthar-international-schools-jeddah-saudi-arabia-modified.png?v=1739958835552" alt="Logo École">
                <div>
                    <div>Gestion des Notes</div>
                    <div class="section-indicator" id="sectionIndicator">
                        <i class="fas fa-user-graduate"></i> <span id="dashboardSectionName">Section</span>
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <span class="user-info">Connecté: <strong id="usernameDisplay">...</strong></span>
                <button id="generateWordButton" title="Générer un fichier Word par classe (ZIP)">
                    <i class="fas fa-file-word"></i> Word
                </button>
                <button id="generateExcelButton" title="Générer un fichier Excel">
                    <i class="fas fa-file-excel"></i> Excel
                </button>
                <button id="logoutButton" title="Se déconnecter">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
        </header>

        <div class="semester-selector" id="semesterSelectorContainer">
            <h3>Choisir le Semestre :</h3>
            <button id="semester1Button" data-semester="S1">Semestre 1</button>
            <button id="semester2Button" data-semester="S2">Semestre 2</button>
        </div>

        <div class="container" id="mainContainer" data-print-semester="" style="display: none;">
            <h2 id="formTitle"><i class="fas fa-edit"></i> Saisir les Notes - Semestre ?</h2>

            <form id="noteForm">
                <label for="class">Classe :</label>
                <select id="class" required>
                    <option value="">-- Sélectionner une classe --</option>
                </select>

                <label for="subject">Matière :</label>
                <select id="subject" required>
                    <option value="">-- Sélectionner une matière --</option>
                </select>

                <label for="studentName">Élève :</label>
                <select id="studentName" required>
                    <option value="">-- Sélectionner un élève --</option>
                </select>

                <div class="note-container">
                    <div class="note-item">
                        <label for="travauxClasse">Travaux Classe</label>
                        <input type="number" id="travauxClasse" placeholder="Max: -" min="0" step="0.01">
                    </div>
                    <div class="note-item">
                        <label for="devoirs">Devoirs</label>
                        <input type="number" id="devoirs" placeholder="Max: -" min="0" step="0.01">
                    </div>
                    <div class="note-item">
                        <label for="evaluation">Évaluation</label>
                        <input type="number" id="evaluation" placeholder="Max: -" min="0" step="0.01">
                    </div>
                    <div class="note-item">
                        <label for="examen">Examen</label>
                        <input type="number" id="examen" placeholder="Max: -" min="0" step="0.01">
                    </div>
                </div>
                <div class="error" id="formErrorMessage"></div>
                <div class="success-message" id="formSuccessMessage"></div>

                <div class="form-buttons">
                    <button type="submit"><i class="fas fa-save"></i> Enregistrer la Note</button>
                    <div class="auto-progress-info" id="autoProgressInfo" style="display: none;">
                        <span id="nextStudentName"></span>
                        <button type="button" id="skipToNextButton" title="Passer à l'élève suivant sans enregistrer">
                            <i class="fas fa-arrow-right"></i> Passer
                        </button>
                    </div>
                </div>
            </form>

            <div class="filter-container">
                <label><i class="fas fa-filter"></i> Filtrer :</label>
                <select id="sortClass">
                    <option value="">Toutes les Classes</option>
                </select>
                <select id="sortSubject">
                    <option value="">Toutes les Matières</option>
                </select>
                <select id="sortStudent">
                    <option value="">Tous les Élèves</option>
                </select>
            </div>

            <div class="table-container">
                <div class="output" id="output"></div>
            </div>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>
